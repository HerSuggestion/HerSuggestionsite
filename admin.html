<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>Admin Panel</title>
<style>
  body { font-family: sans-serif; background:#111; color:#fff; padding:20px }
  button { margin:5px; padding:10px; background:#1976d2; border:none; color:#fff; cursor:pointer; border-radius:5px }
</style>
</head>
<body>
<h1>Admin Panel</h1>
<input id="pass" type="password" placeholder="Password">
<button onclick="login()">Login</button>
<div id="panel" style="display:none">
  <h2>Pending Suggestions</h2>
  <ul id="pending"></ul>
  <button onclick="clearAll()">Clear All</button>
</div>

<script>
const ENDPOINT = 'YOUR_EXEC_URL_HERE';
const PASSWORD = 'Bonomeza1';

async function login() {
  if (document.getElementById('pass').value !== PASSWORD) {
    alert('Wrong password');
    return;
  }
  document.getElementById('panel').style.display = 'block';
  load();
}

function renderPending(items) {
  const ul = document.getElementById('pending');
  ul.innerHTML = items.map((i, idx) =>
    `<li>${i.song} â€” ${i.artist} <button onclick="markPlayed(${idx})">Mark Played</button></li>`
  ).join('');
}

async function load() {
  const res = await fetch(ENDPOINT + '?V1=1');
  const j = await res.json();
  renderPending(j.pending || []);
}

async function markPlayed(index) {
  await fetch(ENDPOINT + '?mark=' + index, { method: 'POST' });
  load();
}

async function clearAll() {
  await fetch(ENDPOINT + '?clear=1', { method: 'POST' });
  load();
}
</script>
</body>
</html>

