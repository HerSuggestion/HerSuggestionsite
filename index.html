<!DOCTYPE html>
<html><head>
<meta name="tiktok-developers-site-verification" content="IoL7TDe0q10H3o5FPBXQCGUTKHQn9gad">
</head><body></body></html>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="tiktok-developers-site-verification" content="IoL7TDe0q10H3o5FPBXQCGUTKHQn9gad">
    <title>Your Music Hub</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        body {
            background: linear-gradient(135deg, #0a0a2e 0%, #16213e 50%, #0f3460 100%);
            color: #f5f5f5;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            min-height: 100vh;
            position: relative;
            overflow-x: hidden;
        }

        /* Animated starry background */
        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: 
                radial-gradient(2px 2px at 20px 30px, #eee, transparent),
                radial-gradient(2px 2px at 40px 70px, rgba(255,255,255,0.8), transparent),
                radial-gradient(1px 1px at 90px 40px, #fff, transparent),
                radial-gradient(1px 1px at 130px 80px, rgba(255,255,255,0.6), transparent),
                radial-gradient(2px 2px at 160px 30px, #eee, transparent);
            background-repeat: repeat;
            background-size: 200px 100px;
            animation: sparkle 20s linear infinite;
            pointer-events: none;
            z-index: 1;
        }

        @keyframes sparkle {
            from { transform: translateY(0px); }
            to { transform: translateY(-100px); }
        }

        /* Navigation */
        .navbar {
            position: fixed;
            top: 0;
            width: 100%;
            background: rgba(10, 10, 30, 0.95);
            backdrop-filter: blur(10px);
            z-index: 1000;
            padding: 1rem 0;
            border-bottom: 1px solid rgba(255,255,255,0.1);
        }

        .nav-container {
            max-width: 1200px;
            margin: 0 auto;
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0 2rem;
        }

        .logo {
            font-size: 1.5rem;
            font-weight: bold;
            color: #64b5f6;
            text-transform: uppercase;
            letter-spacing: 2px;
        }

        .nav-links {
            display: flex;
            list-style: none;
            gap: 2rem;
        }

        .nav-links a {
            color: #f5f5f5;
            text-decoration: none;
            transition: all 0.3s;
            cursor: pointer;
            padding: 0.5rem 1rem;
            border-radius: 5px;
            font-weight: 500;
        }

        .nav-links a:hover, .nav-links a.active {
            color: #64b5f6;
            background: rgba(100, 181, 246, 0.1);
        }

        /* Mobile menu */
        .menu-toggle {
            display: none;
            background: none;
            border: none;
            color: #f5f5f5;
            font-size: 1.5rem;
            cursor: pointer;
        }

        /* Main content */
        .main-content {
            position: relative;
            z-index: 2;
            padding-top: 80px;
        }

        /* Page sections */
        .page-section {
            display: none;
            min-height: calc(100vh - 80px);
            padding: 2rem;
        }

        .page-section.active {
            display: block;
            animation: fadeIn 0.3s ease-in;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        /* Home Page */
        .home-hero {
            text-align: center;
            padding: 4rem 0;
            min-height: 80vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
        }

        .home-hero h1 {
            font-size: 4rem;
            margin-bottom: 1rem;
            background: linear-gradient(45deg, #64b5f6, #42a5f5, #2196f3);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            text-transform: uppercase;
            letter-spacing: 3px;
            text-shadow: 0 0 30px rgba(100, 181, 246, 0.3);
        }

        .home-hero p {
            font-size: 1.3rem;
            margin-bottom: 2rem;
            opacity: 0.9;
            max-width: 600px;
        }

        .about-section {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
            padding: 3rem;
            margin: 2rem 0;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .about-section h2 {
            font-size: 2.5rem;
            text-align: center;
            margin-bottom: 2rem;
            color: #64b5f6;
        }

        .about-text {
            font-size: 1.1rem;
            line-height: 1.8;
            text-align: center;
            max-width: 800px;
            margin: 0 auto;
        }

        /* Song List Page */
        .song-header {
            background: linear-gradient(135deg, #1976d2, #42a5f5);
            padding: 3rem 2rem;
            text-align: center;
            margin-bottom: 2rem;
            border-radius: 15px;
        }

        .song-header h1 {
            font-size: 3rem;
            margin-bottom: 1rem;
            text-shadow: 0 2px 10px rgba(0,0,0,0.3);
        }

        .song-form {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
            padding: 2rem;
            margin-bottom: 2rem;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .song-form h2 {
            margin-bottom: 1.5rem;
            color: #64b5f6;
        }

        .tiktok-login {
            display: flex;
            gap: 1rem;
            margin-bottom: 2rem;
            flex-wrap: wrap;
        }

        .tiktok-btn {
            background: linear-gradient(45deg, #ff0050, #fe2c55);
            color: white;
            border: none;
            padding: 1rem 2rem;
            border-radius: 10px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            flex: 1;
            justify-content: center;
            min-width: 200px;
        }

        .tiktok-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 20px rgba(255, 0, 80, 0.3);
        }

        .form-row {
            display: flex;
            gap: 1rem;
            flex-wrap: wrap;
            margin-bottom: 1rem;
        }

        .form-group {
            flex: 1;
            min-width: 200px;
        }

        input[type="text"], input[type="url"] {
            width: 100%;
            padding: 1rem;
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 10px;
            background: rgba(255, 255, 255, 0.1);
            color: #f5f5f5;
            font-size: 1rem;
        }

        input[type="text"]::placeholder, input[type="url"]::placeholder {
            color: rgba(245, 245, 245, 0.6);
        }

        .submit-btn {
            background: linear-gradient(45deg, #1976d2, #42a5f5);
            color: white;
            border: none;
            padding: 1rem 2rem;
            border-radius: 10px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
            width: 100%;
            font-size: 1.1rem;
        }

        .submit-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 20px rgba(25, 118, 210, 0.3);
        }

        .song-lists {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 2rem;
            margin-top: 2rem;
        }

        .song-list-section {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
            padding: 2rem;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .song-list-section h2 {
            color: #64b5f6;
            margin-bottom: 1.5rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .song-count {
            background: rgba(100, 181, 246, 0.2);
            padding: 0.3rem 0.8rem;
            border-radius: 20px;
            font-size: 0.9rem;
        }

        .song-item {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 10px;
            padding: 1rem;
            margin-bottom: 1rem;
            border: 1px solid rgba(255, 255, 255, 0.1);
            transition: all 0.3s;
        }

        .song-item:hover {
            background: rgba(255, 255, 255, 0.1);
            transform: translateY(-2px);
        }

        .song-title {
            font-weight: bold;
            color: #64b5f6;
            margin-bottom: 0.3rem;
        }

        .song-artist {
            color: #f5f5f5;
            margin-bottom: 0.3rem;
        }

        .song-meta {
            font-size: 0.9rem;
            color: rgba(245, 245, 245, 0.7);
            display: flex;
            gap: 1rem;
            align-items: center;
        }

        .song-link {
            color: #64b5f6;
            text-decoration: none;
        }

        /* Fan Art Gallery */
        .gallery-header {
            text-align: center;
            padding: 3rem 0;
            background: linear-gradient(135deg, #4a148c, #7b1fa2);
            border-radius: 15px;
            margin-bottom: 2rem;
        }

        .gallery-header h1 {
            font-size: 3rem;
            margin-bottom: 1rem;
            color: white;
            text-shadow: 0 2px 10px rgba(0,0,0,0.3);
        }

        .upload-section {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
            padding: 3rem;
            margin: 2rem 0;
            text-align: center;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .upload-icon {
            font-size: 4rem;
            color: #64b5f6;
            margin-bottom: 1rem;
        }

        .upload-btn {
            background: linear-gradient(45deg, #1976d2, #42a5f5);
            color: white;
            border: none;
            padding: 1rem 2rem;
            border-radius: 10px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
            margin-top: 1rem;
        }

        .gallery-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 2rem;
            margin-top: 2rem;
        }

        .art-item {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
            overflow: hidden;
            transition: all 0.3s;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .art-item:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
        }

        .art-image {
            width: 100%;
            height: 250px;
            background: linear-gradient(45deg, #1976d2, #42a5f5);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 1.2rem;
        }

        /* Stream Rules */
        .rules-container {
            max-width: 800px;
            margin: 0 auto;
            padding: 2rem;
        }

        .rules-header {
            text-align: center;
            margin-bottom: 3rem;
            background: linear-gradient(135deg, #d32f2f, #f57c00);
            padding: 3rem 2rem;
            border-radius: 15px;
        }

        .rules-header h1 {
            font-size: 3rem;
            margin-bottom: 1rem;
            color: white;
            text-shadow: 0 2px 10px rgba(0,0,0,0.3);
        }

        .rule-item {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
            padding: 2rem;
            margin-bottom: 1.5rem;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .rule-number {
            background: linear-gradient(45deg, #1976d2, #42a5f5);
            color: white;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            margin-bottom: 1rem;
        }

        .rule-title {
            font-size: 1.3rem;
            font-weight: bold;
            color: #64b5f6;
            margin-bottom: 0.5rem;
        }

        /* Message styling */
        .message {
            padding: 1rem;
            border-radius: 10px;
            margin: 1rem 0;
            text-align: center;
        }

        .success { background: rgba(76, 175, 80, 0.2); color: #4caf50; border: 1px solid rgba(76, 175, 80, 0.3); }
        .error { background: rgba(244, 67, 54, 0.2); color: #f44336; border: 1px solid rgba(244, 67, 54, 0.3); }
        .loading { background: rgba(255, 152, 0, 0.2); color: #ff9800; border: 1px solid rgba(255, 152, 0, 0.3); }

        /* Responsive Design */
        @media (max-width: 768px) {
            .menu-toggle {
                display: block;
            }

            .nav-links {
                display: none;
                position: absolute;
                top: 100%;
                left: 0;
                width: 100%;
                background: rgba(10, 10, 30, 0.98);
                flex-direction: column;
                padding: 1rem;
                gap: 0;
            }

            .nav-links.active {
                display: flex;
            }

            .nav-links a {
                padding: 1rem;
                text-align: center;
                border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            }

            .home-hero h1 {
                font-size: 2.5rem;
            }

            .song-header h1 {
                font-size: 2rem;
            }

            .song-lists {
                grid-template-columns: 1fr;
            }

            .form-row {
                flex-direction: column;
            }

            .tiktok-login {
                flex-direction: column;
            }
        }
    </style>
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar">
        <div class="nav-container">
            <div class="logo">Your Music Hub</div>
            <button class="menu-toggle" onclick="toggleMenu()">☰</button>
            <ul class="nav-links" id="navLinks">
                <li><a href="#" onclick="showPage('home')" class="active">Home</a></li>
                <li><a href="#" onclick="showPage('songlist')">Song List</a></li>
                <li><a href="#" onclick="showPage('previously-played')">Previously Played Songs</a></li>
                <li><a href="#" onclick="showPage('fanart')">Fan Art</a></li>
                <li><a href="#" onclick="showPage('rules')">Stream Rules</a></li>
            </ul>
        </div>
    </nav>

    <!-- Main Content -->
    <div class="main-content">
        <!-- Home Page -->
        <section id="home" class="page-section active">
            <div class="container">
                <div class="home-hero">
                    <h1>Welcome to Your Music Hub!</h1>
                    <p>Your go-to destination for amazing music, live streams, and community interaction!</p>
                </div>
                
                <div class="about-section">
                    <h2>About Me</h2>
                    <div class="about-text">
                        <p>Welcome everyone! My name is [Your Name] and I'm an energetic, passionate musician who loves sharing the joy of music with everyone!</p>
                        <br>
                        <p>I am a musician who has been playing for [X years] and I love connecting with my audience through live streams and interactive performances. Music is my passion and I love exploring different genres and taking song requests from viewers like you!</p>
                        <br>
                        <p>I started streaming because I wanted to share my love for music with others and create a fun, positive community where we can all enjoy great music together. Whether you're here to discover new songs or just hang out and listen, everyone is welcome!</p>
                        <br>
                        <p>I love playing your suggestions and it's so much fun getting to experience new music for the first time while performing it live for everyone!</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Song List Page -->
        <section id="songlist" class="page-section">
            <div class="container">
                <div class="song-header">
                    <h1>Song List</h1>
                    <p>The songs listed here are in no particular order. The list is cleared every night so if your song is missing from the list, please use the Song Suggestion Form below to re-add or manage your suggestion.</p>
                </div>

                <div class="song-form">
                    <h2>Suggest a Song</h2>
                    
                    <!-- Login Section -->
                    <div id="loginSection" class="tiktok-login">
                        <button class="tiktok-btn" onclick="loginWithTikTok()">
                            🎵 Login with TikTok to Continue
                        </button>
                        <p style="text-align: center; margin-top: 1rem; opacity: 0.8;">You must login with TikTok to suggest songs</p>
                    </div>
                    
                    <!-- Welcome Message (hidden initially) -->
                    <div id="welcomeSection" style="display: none;">
                        <div style="background: rgba(255, 0, 80, 0.1); border: 1px solid rgba(255, 0, 80, 0.3); border-radius: 10px; padding: 1rem; margin-bottom: 2rem; text-align: center;">
                            <h3 style="color: #ff2c55; margin-bottom: 0.5rem;">🎉 Welcome back!</h3>
                            <p id="welcomeMessage" style="margin: 0; font-size: 1.1rem;">Welcome, <span id="usernameDisplay">@username</span>!</p>
                        </div>
                    </div>
                    
                    <!-- Song Form (hidden initially) -->
                    <div id="songFormSection" style="display: none;">
                        <form id="songForm">
                            <div class="form-row">
                                <div class="form-group">
                                    <input type="text" id="songTitle" placeholder="Song title *" required>
                                </div>
                                <div class="form-group">
                                    <input type="text" id="artistName" placeholder="Artist *" required>
                                </div>
                            </div>
                            <div class="form-row">
                                <div class="form-group" style="flex: 1;">
                                    <input type="url" id="songLink" placeholder="Enter Songsterr/YouTube link here *" required style="width: 100%;">
                                </div>
                            </div>
                            <button type="submit" class="submit-btn">Submit!</button>
                        </form>
                        <div id="songMessage"></div>
                    </div>
                </div>

                <div class="song-lists">
                    <div class="song-list-section">
                        <h2>Today's Played Songs <span class="song-count" id="playedCount">0</span></h2>
                        <div id="playedSongs"></div>
                    </div>
                    
                    <div class="song-list-section">
                        <h2>Today's Suggested Songs <span class="song-count" id="suggestedCount">0</span></h2>
                        <div id="suggestedSongs"></div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Previously Played Songs Page -->
        <section id="previously-played" class="page-section">
            <div class="container">
                <div class="song-header" style="background: linear-gradient(135deg, #388e3c, #66bb6a);">
                    <h1>Previously Played Songs</h1>
                    <p>Browse through all the amazing songs that have been played in previous streams!</p>
                </div>
                
                <div class="song-list-section">
                    <h2>All Previously Played Songs <span class="song-count">6</span></h2>
                    <div id="allPlayedSongs">
                        <div class="song-item">
                            <div class="song-title">Boss Theme | 「刀刀所極之物」 by Godspeed</div>
                            <div class="song-artist">Ato</div>
                            <div class="song-meta">
                                <span>3m4s</span>
                                <a href="https://youtu.be/WAEIFgkj8v4" class="song-link" target="_blank">link</a>
                                <span>ventress1243</span>
                            </div>
                        </div>
                        <div class="song-item">
                            <div class="song-title">Beneath The Final Light</div>
                            <div class="song-artist">Frederik</div>
                            <div class="song-meta">
                                <span>8m10s</span>
                                <a href="https://youtu.be/9lbgUhF_OJ0" class="song-link" target="_blank">link</a>
                            </div>
                        </div>
                        <div class="song-item">
                            <div class="song-title">Arknights OST - Battleplan Extinguished Sins</div>
                            <div class="song-artist">Zhentao T.</div>
                            <div class="song-meta">
                                <span>3m51s</span>
                                <a href="https://youtu.be/EuCKE4gFmP4" class="song-link" target="_blank">link</a>
                            </div>
                        </div>
                        <div class="song-item">
                            <div class="song-title">Joe Swanson & Peter in KPOP DEMON HUNTERS 2</div>
                            <div class="song-artist">Ricky K.</div>
                            <div class="song-meta">
                                <span>3m24s</span>
                                <a href="https://youtu.be/Jwa5OxDp0h4" class="song-link" target="_blank">link</a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Fan Art Page -->
        <section id="fanart" class="page-section">
            <div class="container">
                <div class="gallery-header">
                    <h1>Welcome to Your Music Hub Gallery!</h1>
                    <p>If you've created any fanart for the channel, you can upload them here to share with everyone else!</p>
                </div>

                <div class="upload-section">
                    <div class="upload-icon">☁️</div>
                    <h2>Share Your Fanart</h2>
                    <p>Select the images to upload</p>
                    <button class="upload-btn" onclick="uploadFanart()">Choose Files</button>
                    <p style="margin-top: 1rem; font-size: 0.9rem; opacity: 0.7;">JPG PNG BMP GIF WEBP | 5 MB ⚠️</p>
                </div>

                <div class="gallery-grid">
                    <div class="art-item">
                        <div class="art-image" style="background: linear-gradient(45deg, #9c27b0, #e91e63);">Sample Fan Art 1</div>
                    </div>
                    <div class="art-item">
                        <div class="art-image" style="background: linear-gradient(45deg, #3f51b5, #2196f3);">Sample Fan Art 2</div>
                    </div>
                    <div class="art-item">
                        <div class="art-image" style="background: linear-gradient(45deg, #ff9800, #ff5722);">Sample Fan Art 3</div>
                    </div>
                    <div class="art-item">
                        <div class="art-image" style="background: linear-gradient(45deg, #4caf50, #8bc34a);">Sample Fan Art 4</div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Stream Rules Page -->
        <section id="rules" class="page-section">
            <div class="rules-container">
                <div class="rules-header">
                    <h1>Stream Rules</h1>
                    <p>Please follow these guidelines to keep our community fun and welcoming for everyone!</p>
                </div>

                <div class="rule-item">
                    <div class="rule-number">1</div>
                    <div class="rule-title">Be Respectful</div>
                    <p>Treat everyone in the chat with kindness and respect. No harassment, hate speech, or bullying will be tolerated.</p>
                </div>

                <div class="rule-item">
                    <div class="rule-number">2</div>
                    <div class="rule-title">Keep It Clean</div>
                    <p>Please keep the chat family-friendly. Avoid excessive profanity, inappropriate content, or spam.</p>
                </div>

                <div class="rule-item">
                    <div class="rule-number">3</div>
                    <div class="rule-title">Song Requests</div>
                    <p>Use the song request form on this website. Please avoid requesting inappropriate songs or content that violates copyright guidelines.</p>
                </div>

                <div class="rule-item">
                    <div class="rule-number">4</div>
                    <div class="rule-title">No Self-Promotion</div>
                    <p>Please don't promote your own content, social media, or other channels without permission.</p>
                </div>

                <div class="rule-item">
                    <div class="rule-number">5</div>
                    <div class="rule-title">Listen to Moderators</div>
                    <p>Please follow instructions from moderators and the streamer. They're here to help keep the stream enjoyable for everyone.</p>
                </div>

                <div class="rule-item">
                    <div class="rule-number">6</div>
                    <div class="rule-title">Have Fun!</div>
                    <p>Most importantly, relax and enjoy the music! This is a place to have a good time and discover new songs together.</p>
                </div>
            </div>
        </section>
    </div>

    <script>
        // Your Google Apps Script endpoint
        const ENDPOINT = "https://script.google.com/macros/s/AKfycbwehlwjPE4WXSKamnsnywAMbnYTQlWsG8duCzgyehW1136MZ6E9s_hqoKUtRv0fLJgB/exec";

        // Navigation functionality
        function showPage(pageId) {
            console.log('Switching to page:', pageId); // Debug log
            
            // Hide all pages
            document.querySelectorAll('.page-section').forEach(page => {
                page.classList.remove('active');
                console.log('Hiding page:', page.id); // Debug log
            });
            
            // Show selected page
            const targetPage = document.getElementById(pageId);
            if (targetPage) {
                targetPage.classList.add('active');
                console.log('Showing page:', pageId); // Debug log
            } else {
                console.error('Page not found:', pageId);
            }
            
            // Update nav links
            document.querySelectorAll('.nav-links a').forEach(link => {
                link.classList.remove('active');
            });
            
            // Find and activate the clicked link
            const clickedLink = document.querySelector(`[onclick="showPage('${pageId}')"]`);
            if (clickedLink) {
                clickedLink.classList.add('active');
            }
            
            // Load songs if on songlist page
            if (pageId === 'songlist') {
                loadSongs();
                checkLoginStatus(); // Reset login state when navigating to song list
            }
            
            // Close mobile menu
            document.getElementById('navLinks').classList.remove('active');
        }

        function toggleMenu() {
            document.getElementById('navLinks').classList.toggle('active');
        }

        // TikTok login functionality
        let currentUser = null;

        function loginWithTikTok() {
            // Real TikTok OAuth implementation
            // You'll need to register your app at https://developers.tiktok.com/
            
            const CLIENT_KEY = 'aw3xbibhm9m5etqq'; // Your TikTok client key
            const REDIRECT_URI = encodeURIComponent('https://hersuggestion.github.io/HerSuggestionsite'); // Your callback URL
            const SCOPE = 'user.info.basic'; // Required permissions
            const STATE = Math.random().toString(36).substring(2, 15); // Security state parameter
            
            // Store state for validation
            localStorage.setItem('tiktok_auth_state', STATE);
            
            // TikTok OAuth URL
            const authUrl = `https://www.tiktok.com/v2/auth/authorize/` +
                          `?client_key=${CLIENT_KEY}` +
                          `&scope=${SCOPE}` +
                          `&response_type=code` +
                          `&redirect_uri=${REDIRECT_URI}` +
                          `&state=${STATE}`;
            
            // Show loading state
            const loginBtn = document.querySelector('.tiktok-btn');
            loginBtn.innerHTML = '⏳ Redirecting to TikTok...';
            loginBtn.disabled = true;
            
            // Check if this is production or demo
            if (window.location.hostname === 'hersuggestion.github.io') {
                // Production - use real TikTok OAuth
                console.log('Production OAuth URL:', authUrl);
                
                // Redirect to TikTok OAuth
                window.location.href = authUrl;
            } else {
                // Development - use demo
                setTimeout(() => showDemoLoginForm(), 1000);
            }
        }

        function showDemoLoginForm() {
            const loginSection = document.getElementById('loginSection');
            loginSection.innerHTML = `
                <div style="background: rgba(255, 255, 255, 0.05); border-radius: 10px; padding: 2rem; text-align: center;">
                    <h3 style="color: #ff2c55; margin-bottom: 1rem;">Demo TikTok Login</h3>
                    <p style="margin-bottom: 1rem; opacity: 0.8;">Enter your TikTok username for demo purposes:</p>
                    <input type="text" id="demoUsername" placeholder="Enter your TikTok @username" 
                           style="width: 100%; max-width: 300px; padding: 1rem; border-radius: 8px; border: 1px solid rgba(255,255,255,0.2); background: rgba(255,255,255,0.1); color: #f5f5f5; margin-bottom: 1rem;">
                    <br>
                    <button onclick="completeDemoLogin()" style="background: linear-gradient(45deg, #ff0050, #fe2c55); color: white; border: none; padding: 1rem 2rem; border-radius: 10px; cursor: pointer; font-weight: bold;">
                        🎵 Continue with This Username
                    </button>
                    <p style="font-size: 0.9rem; opacity: 0.6; margin-top: 1rem;">
                        Note: This is demo mode. Real TikTok integration requires developer setup.
                    </p>
                </div>
            `;
        }

        function completeDemoLogin() {
            const usernameInput = document.getElementById('demoUsername');
            let username = usernameInput.value.trim();
            
            if (!username) {
                alert('Please enter a username!');
                return;
            }
            
            // Add @ if not present
            if (!username.startsWith('@')) {
                username = '@' + username;
            }
            
            // Simulate API call delay
            const btn = event.target;
            btn.innerHTML = '⏳ Logging in...';
            btn.disabled = true;
            
            setTimeout(() => {
                handleSuccessfulLogin(username);
            }, 1500);
        }

        function handleSuccessfulLogin(username) {
            currentUser = username;
            
            // Store login state
            localStorage.setItem('tiktok_user', username);
            
            // Hide login section
            document.getElementById('loginSection').style.display = 'none';
            
            // Show welcome message
            document.getElementById('usernameDisplay').textContent = username;
            document.getElementById('welcomeSection').style.display = 'block';
            
            // Show song form
            document.getElementById('songFormSection').style.display = 'block';
            
            // Add welcome animation
            document.getElementById('welcomeSection').style.animation = 'fadeIn 0.5s ease-in';
            document.getElementById('songFormSection').style.animation = 'fadeIn 0.5s ease-in 0.2s both';
        }

        // Handle OAuth callback (for real implementation)
        function handleTikTokCallback() {
            const urlParams = new URLSearchParams(window.location.search);
            const code = urlParams.get('code');
            const state = urlParams.get('state');
            const storedState = localStorage.getItem('tiktok_auth_state');
            
            if (code && state === storedState) {
                // In production, send code to your backend to exchange for access token
                // Backend should then return user info
                console.log('TikTok OAuth code received:', code);
                
                // For demo, simulate successful login
                alert('OAuth code received! In production, this would be sent to your backend.');
                showDemoLoginForm();
            }
        }

        // Check if user is already logged in
        function checkLoginStatus() {
            // Check for OAuth callback first
            if (window.location.search.includes('code=')) {
                handleTikTokCallback();
                return;
            }
            
            // Check if user was previously logged in (demo mode)
            const savedUser = localStorage.getItem('tiktok_user');
            if (savedUser) {
                handleSuccessfulLogin(savedUser);
            } else {
                // Reset to login state
                currentUser = null;
                document.getElementById('loginSection').style.display = 'block';
                document.getElementById('welcomeSection').style.display = 'none';
                document.getElementById('songFormSection').style.display = 'none';
            }
        }

        // Logout function
        function logout() {
            currentUser = null;
            localStorage.removeItem('tiktok_user');
            localStorage.removeItem('tiktok_auth_state');
            checkLoginStatus();
        }

        // Song form submission
        document.addEventListener('DOMContentLoaded', function() {
            const songForm = document.getElementById('songForm');
            if (songForm) {
                songForm.addEventListener('submit', async (e) => {
                    e.preventDefault();
                    
                    // Check if user is logged in
                    if (!currentUser) {
                        alert('Please login with TikTok first!');
                        return;
                    }
                    
                    const messageEl = document.getElementById('songMessage');
                    messageEl.innerHTML = '<div class="message loading">Submitting...</div>';
                    
                    const payload = {
                        song: document.getElementById('songTitle').value.trim(),
                        artist: document.getElementById('artistName').value.trim(),
                        link: document.getElementById('songLink').value.trim(),
                        username: currentUser // Use the logged-in TikTok username
                    };
                    
                    // Validate required fields
                    if (!payload.song || !payload.artist || !payload.link) {
                        messageEl.innerHTML = '<div class="message error">❌ All fields are required!</div>';
                        return;
                    }
                    
                    try {
                        const response = await fetch(ENDPOINT, {
                            method: 'POST',
                            headers: { 'Content-Type': 'application/json' },
                            body: JSON.stringify(payload)
                        });
                        
                        const result = await response.json();
                        
                        if (result.ok) {
                            messageEl.innerHTML = '<div class="message success">✅ Song added successfully!</div>';
                            document.getElementById('songForm').reset();
                            setTimeout(() => loadSongs(), 1000);
                        } else {
                            messageEl.innerHTML = '<div class="message error">❌ ' + (result.error || 'Error occurred, please try again') + '</div>';
                        }
                    } catch (error) {
                        messageEl.innerHTML = '<div class="message error">❌ Network error: ' + error.message + '</div>';
                    }
                });
            }
        });

        // Load songs from API
        async function loadSongs() {
            try {
                const response = await fetch(ENDPOINT + '?t=' + Date.now());
                const data = await response.json();
                
                renderSongs('suggestedSongs', data.pending || [], 'suggestedCount');
                renderSongs('playedSongs', data.played || [], 'playedCount');
                
            } catch (error) {
                console.error('Error loading songs:', error);
                const suggestedContainer = document.getElementById('suggestedSongs');
                const playedContainer = document.getElementById('playedSongs');
                if (suggestedContainer) {
                    suggestedContainer.innerHTML = '<div class="song-item"><div class="song-title">Failed to load songs</div></div>';
                }
                if (playedContainer) {
                    playedContainer.innerHTML = '<div class="song-item"><div class="song-title">Failed to load songs</div></div>';
                }
            }
        }

        function renderSongs(containerId, songs, countId) {
            const container = document.getElementById(containerId);
            const countEl = document.getElementById(countId);
            
            if (!container || !countEl) return;
            
            countEl.textContent = songs.length;
            
            if (songs.length > 0) {
                container.innerHTML = songs.map(song => `
                    <div class="song-item">
                        <div class="song-title">${escapeHtml(song.song)}</div>
                        <div class="song-artist">${escapeHtml(song.artist)}</div>
                        <div class="song-meta">
                            ${song.username ? '<span>' + escapeHtml(song.username) + '</span>' : ''}
                            ${song.link ? '<a href="' + escapeHtml(song.link) + '" class="song-link" target="_blank" rel="noopener">link</a>' : ''}
                        </div>
                    </div>
                `).join('');
            } else {
                container.innerHTML = '<div class="song-item"><div class="song-title">No songs yet.</div></div>';
            }
        }

        function escapeHtml(text) {
            const div = document.createElement('div');
            div.textContent = text || '';
            return div.innerHTML;
        }

        // Upload fanart (placeholder)
        function uploadFanart() {
            const input = document.createElement('input');
            input.type = 'file';
            input.accept = 'image/*';
            input.multiple = true;
            input.onchange = function(e) {
                alert('File upload functionality would be implemented here. Selected ' + e.target.files.length + ' file(s).');
            };
            input.click();
        }

        // Initialize page
        document.addEventListener('DOMContentLoaded', function() {
            loadSongs();
            checkLoginStatus();
        });
    </script>














